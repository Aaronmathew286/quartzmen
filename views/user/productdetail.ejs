<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Almendra+SC&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        .navbar {
            background-color: #1d1e1e;
        }

        .navbar-brand {
            font-family: 'Almendra SC', serif;
            color: #FFDD00;
        }

        .navbar,
        .navbar .nav-link,
        .navbar .navbar-text {
            color: white;
        }

        .navbar .nav-link:hover,
        .navbar .nav-link:focus,
        .navbar .dropdown-item {
            color: #ffdd00;
        }

        .navbar .dropdown-menu {
            background-color: #1d1e1e;
        }

        .navbar .dropdown-item {
            color: white;
        }

        .navbar .dropdown-item:hover {
            background-color: #ffdd00;
            color: #000000;
        }

        .navbar .navbar-toggler .navbar-toggler-icon {
            color: #ffffff;
        }

        .second-nav {
            background-color: #25a0a0;

        }


        .carousel-inner img {
            width: 100%;
            height: 700px;
            object-fit: cover;
        }

        .nav-item .fa-solid:hover {
            color: #FFDD00;
        }

        .custom-navbar.navbar-nav {
            margin-top: 0;
        }

        .custom-navbar.nav-link {
            color: #333;
            /* Dark grey text */
            transition: color 0.3s ease-in-out;
            /* Smooth color transition */
        }

        .custom-navbar.nav-link:hover {
            color: #007bff;
            /* Blue on hover */
        }

        .material-symbols-outlined {
            margin-bottom: 2px;
            color: #FFDD00;
        }

        .carousel-control-prev,
        .carousel-control-next {
            width: 5%;
        }

        .carousel-control-prev:hover,
        .carousel-control-next:hover {
            background: none;
        }

        .footer {
            background-color: #000;
            /* Black background */
            color: #fff;
            /* White text */
            padding: 20px 0;
            /* Padding around the footer content */
        }

        /* Footer Link Hover Effect */
        .footer a:hover {
            color: yellow;
            /* Yellow color on hover */
        }

        .icon-hover:hover {
            border-color: #3b71ca !important;
            background-color: white !important;
            color: #3b71ca !important;
        }

        .icon-hover:hover i {
            color: #3b71ca !important;
        }
    </style>
</head>

<body>
    <!-- navbar starts -->
    <div class="main-div">
        <nav class="navbar navbar-expand-lg">
            <div class="navbar-brand-container d-flex align-items-center">
                <div class="navbar-brand" onclick="location.href='#'">Quartz
                    <span class="material-symbols-outlined ms-2">watch_wake</span>
                    Men
                </div>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <form class="form-inline mx-auto">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </form>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                            <i class="fa-solid fa-heart"></i>
                        </a>
                    </li>
                    <% if (loggedIn) { %>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink2" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fa-solid fa-user"></i>
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink2">
                                <a class="dropdown-item" href="#">Profile</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="/logout">Logout</a>
                            </div>
                        </li>
                    <% } else { %>
                            <li class="nav-item">
                                <a class="nav-link" href="/signup"><i class="fa-solid fa-user"></i>Sign Up</a>
                            </li>
                    <% } %>
                        <li class="nav-item">
                            <a class="nav-link" href="#" role="button" aria-haspopup="true"
                            aria-expanded="false">
                                <i class="fa-solid fa-cart-shopping"></i>
                            </a>
                        </li>
                </ul>
            </div>
        </nav>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Product Detail</li>
            </ol>
        </nav>
        
        <!-- navbar closes -->
        <section class="py-5">
            <div class="container">
                <div class="row gx-5">
                    <% if (products.image.length > 0) { %>
                        <aside class="col-lg-6">
                            <!-- Main image display -->
                            <div class="border rounded-4 mb-3 d-flex justify-content-center">
                                <a data-fslightbox="mygalley" class="rounded-4" target="_blank" data-type="image"
                                    href="/uploads/<%= products.image[0] %>">
                                    <img style="max-width: 100%; max-height: 100vh; margin: auto;" class="rounded-4 fit"
                                        src="/uploads/<%= products.image[0] %>" />
                                </a>
                            </div>
                            <!-- Thumbnails display -->
                            <div class="d-flex justify-content-center mb-3">
                                <% products.image.forEach(function(images, index) { %>
                                    <% if (index > 0) { %>
                                        <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image"
                                            href="/uploads/<%= images %>">
                                            <img width="60" height="60" class="rounded-2" src="/uploads/<%= images %>" />
                                        </a>
                                    <% } %>
                                <% }); %>
                            </div>
                        </aside>
                        <% } %>
                    <main class="col-lg-6">
                        <div class="ps-lg-3">
                            <h4 class="title text-dark">
                                <%= products.brand %> <br />
                                <%= products.name %>
                            </h4>
                            <div class="d-flex flex-row my-3">
                                <div class="text-warning mb-1 me-2">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <span class="ms-1">4.5</span>
                                </div>
                                <span class="text-muted"><i class="fas fa-shopping-basket fa-sm mx-1"></i>154
                                    orders</span>
                                <span class="text-success ms-2">In stock</span>
                            </div>
                            <div class="mb-3">
                                <span class="h5">â‚¹<%= products.price %></span>
                            </div>
                            <p>
                                <%= products.description %>
                            </p>
                            <div class="row">
                                <dt class="col-3">Type:</dt>
                                <dd class="col-9">
                                    <%= products.category %>
                                </dd>
                                <dt class="col-3">Material:</dt>
                                <dd class="col-9">
                                    <%= products.strapMaterial %>
                                </dd>
                                <dt class="col-3">Brand:</dt>
                                <dd class="col-9">
                                    <%= products.brand %>
                                </dd>
                            </div>
                            <hr/>
                            <form id="addToCartForm">
                                <div class="row mb-4">
                                  <div class="col-md-4 col-6">
                                    <label class="mb-2 d-block">Quantity</label>
                                    <div class="input-group mb-3" style="width: 170px;">
                                      <button class="btn btn-white border border-secondary px-3" type="button" id="decreaseQuantity" data-mdb-ripple-color="dark">
                                        <i class="fas fa-minus"></i>
                                      </button>
                                      <input type="text" id="quantityInput" name="quantity" class="form-control text-center border border-secondary" placeholder="1" aria-label="Example text with button addon" aria-describedby="button-addon1" />
                                      <button class="btn btn-white border border-secondary px-3" type="button" id="increaseQuantity" data-mdb-ripple-color="dark">
                                        <i class="fas fa-plus"></i>
                                      </button>
                                    </div>
                                  </div>
                                  <div class="col-md-4 col-6 mb-3"></div>
                                </div>
                              
                                <button class="btn btn-primary shadow-0" type="submit"> <i class="me-1 fa fa-shopping-basket"></i> Add to cart </button>

                            </form>
                              
                        </div>
                    </main>
                </div>
            </div>
        </section>
        <!-- Main-body Ends -->
        <footer class="footer py-5 bg-black text-white">
            <div class="container">
                <div class="row">
                    <!-- Column 1 -->
                    <div class="col-md-4">
                        <h5>About Us</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed
                            cursus ante dapibus diam.</p>
                    </div>
                    <!-- Column 2 -->
                    <div class="col-md-4">
                        <h5>Our Services</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed
                            cursus ante dapibus diam.</p>
                    </div>
                    <!-- Column 3 -->
                    <div class="col-md-4">
                        <h5>Contact Us</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed
                            cursus ante dapibus diam.</p>
                    </div>
                </div>
            </div>
        </footer>

    </div>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    

    document.getElementById('increaseQuantity').addEventListener('click', function() {
        const quantityInput = document.getElementById('quantityInput');
        let quantity = parseInt(quantityInput.value) || 1;  // Default to 1 if not a number
        quantityInput.value = quantity + 1;
    });

    document.getElementById('decreaseQuantity').addEventListener('click', function() {
        const quantityInput = document.getElementById('quantityInput');
        let quantity = parseInt(quantityInput.value) || 1;  // Default to 1 if not a number
        if (quantity > 1) {
            quantityInput.value = quantity - 1;
        }
    });

    document.getElementById('addToCartForm').addEventListener('submit', function(event) {
    event.preventDefault();
    
    const productId = '<%= products._id %>';
    const quantity = parseInt(document.getElementById('quantityInput').value);

    fetch(`/cart/${productId}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ quantity: quantity })
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            Swal.fire({
                title: 'Added to Cart!',
                text: "Would you like to go to your cart or continue shopping?",
                icon: 'success',
                showCancelButton: true,
                confirmButtonText: 'Go to Cart',
                cancelButtonText: 'Continue Shopping'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/cart'; // Redirect to the cart page
                } else if (result.dismiss === Swal.DismissReason.cancel) {
                    // Stay on the current page to continue shopping
                }
            });
        } else {
            Swal.fire({
                title: 'Error!',
                text: 'There was an issue adding the product to your cart.',
                icon: 'error',
                confirmButtonText: 'Okay'
            });
        }
    })
    .catch(error => {
        console.error('Error:', error);
        Swal.fire({
            title: 'Error!',
            text: 'Something went wrong. Please try again later.',
            icon: 'error',
            confirmButtonText: 'Okay'
        });
    });
});


</script>


</body>

</html>